<!-- Filters Sidebar -->
<div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 transition-colors duration-200 sticky top-6">
  
  <!-- Filters Header -->
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-base font-semibold text-gray-900 dark:text-white flex items-center gap-2">
      <i class="icon-settings text-blue-600 text-sm"></i>
      Bộ lọc
    </h3>
    <button
      (click)="onClearFilters()"
      class="text-xs text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 
             font-medium transition-colors duration-200 px-2 py-1"
    >
      Xóa tất cả
    </button>
  </div>
  
  <!-- Search Bar -->
  <div class="mb-3">
    <div class="relative">
      <div class="absolute inset-y-0 left-0 pl-2.5 flex items-center pointer-events-none">
        <i class="icon-search text-gray-400 text-xs"></i>
      </div>
      <input
        type="text"
        [(ngModel)]="filters.searchTerm"
        (input)="onFilterChange()"
        placeholder="Tìm tài liệu..."
        class="w-full pl-8 pr-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md 
               bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm
               placeholder-gray-500 dark:placeholder-gray-400 
               focus:ring-1 focus:ring-blue-500 focus:border-blue-500 
               transition-colors duration-200"
      />
    </div>
  </div>

  <!-- Filter Sections - Compact with Dropdowns -->
  <div class="space-y-2.5">
    
    <!-- Topic Filter -->
    <div class="border-b border-gray-200 dark:border-gray-700 pb-2">
      <button
        (click)="toggleSection('topic')"
        class="w-full flex items-center justify-between text-sm font-medium text-gray-700 dark:text-gray-300 py-1 hover:text-gray-900 dark:hover:text-white transition-colors"
      >
        <span class="flex items-center gap-1.5">
          <i class="icon-book text-xs"></i>
          <span>Chủ đề</span>
          <span *ngIf="!expandedSections['topic'] && filters.selectedTopic" 
                class="text-xs font-normal text-gray-500 dark:text-gray-400 ml-1">
            ({{ getSelectedTopicName() }})
          </span>
        </span>
        <i class="icon-chevron-down text-xs transition-transform duration-200" 
           [class.rotate-180]="expandedSections['topic']"></i>
      </button>
      <div *ngIf="expandedSections['topic']" class="mt-2">
        <select
          [(ngModel)]="filters.selectedTopic"
          (change)="onFilterChange()"
          class="w-full px-2.5 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md 
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm
                 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 
                 transition-colors duration-200"
        >
          <option [value]="null">Tất cả</option>
          <option *ngFor="let topic of topics" [value]="topic.id">{{ topic.name }}</option>
        </select>
      </div>
    </div>
    
    <!-- Category Filter -->
    <div class="border-b border-gray-200 dark:border-gray-700 pb-2">
      <button
        (click)="toggleSection('category')"
        class="w-full flex items-center justify-between text-sm font-medium text-gray-700 dark:text-gray-300 py-1 hover:text-gray-900 dark:hover:text-white transition-colors"
      >
        <span class="flex items-center gap-1.5">
          <i class="icon-folder text-xs"></i>
          <span>Danh mục</span>
          <span *ngIf="!expandedSections['category'] && filters.selectedCategory" 
                class="text-xs font-normal text-gray-500 dark:text-gray-400 ml-1">
            ({{ getSelectedCategoryName() }})
          </span>
        </span>
        <i class="icon-chevron-down text-xs transition-transform duration-200" 
           [class.rotate-180]="expandedSections['category']"></i>
      </button>
      <div *ngIf="expandedSections['category']" class="mt-2">
        <select
          [(ngModel)]="filters.selectedCategory"
          (change)="onFilterChange()"
          class="w-full px-2.5 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md 
                 bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm
                 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 
                 transition-colors duration-200"
        >
          <option [value]="null">Tất cả</option>
          <option *ngFor="let category of categories" [value]="category.id">{{ category.name }}</option>
        </select>
      </div>
    </div>

    <!-- Level Filter -->
    <div class="border-b border-gray-200 dark:border-gray-700 pb-2">
      <button
        (click)="toggleSection('level')"
        class="w-full flex items-center justify-between text-sm font-medium text-gray-700 dark:text-gray-300 py-1 hover:text-gray-900 dark:hover:text-white transition-colors"
      >
        <span class="flex items-center gap-1.5">
          <i class="icon-trending-up text-xs"></i>
          <span>Cấp độ</span>
          <span *ngIf="!expandedSections['level'] && filters.selectedLevel" 
                class="text-xs font-normal text-gray-500 dark:text-gray-400 ml-1">
            ({{ getSelectedLevelName() }})
          </span>
        </span>
        <i class="icon-chevron-down text-xs transition-transform duration-200" 
           [class.rotate-180]="expandedSections['level']"></i>
      </button>
      <div *ngIf="expandedSections['level']" class="mt-2 space-y-1.5">
        <label class="flex items-center cursor-pointer">
          <input
            type="radio"
            value=""
            [(ngModel)]="filters.selectedLevel"
            (change)="onFilterChange()"
            class="w-3.5 h-3.5 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 
                   dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600"
          />
          <span class="ml-2 text-xs text-gray-700 dark:text-gray-300">Tất cả</span>
        </label>
        <label class="flex items-center cursor-pointer">
          <input
            type="radio"
            value="Beginner"
            [(ngModel)]="filters.selectedLevel"
            (change)="onFilterChange()"
            class="w-3.5 h-3.5 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 
                   dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600"
          />
          <span class="ml-2 text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1">
            <span class="w-1.5 h-1.5 bg-green-500 rounded-full"></span>
            Cơ bản
          </span>
        </label>
        <label class="flex items-center cursor-pointer">
          <input
            type="radio"
            value="Intermediate"
            [(ngModel)]="filters.selectedLevel"
            (change)="onFilterChange()"
            class="w-3.5 h-3.5 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 
                   dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600"
          />
          <span class="ml-2 text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1">
            <span class="w-1.5 h-1.5 bg-yellow-500 rounded-full"></span>
            Trung cấp
          </span>
        </label>
        <label class="flex items-center cursor-pointer">
          <input
            type="radio"
            value="Advanced"
            [(ngModel)]="filters.selectedLevel"
            (change)="onFilterChange()"
            class="w-3.5 h-3.5 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 
                   dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600"
          />
          <span class="ml-2 text-xs text-gray-700 dark:text-gray-300 flex items-center gap-1">
            <span class="w-1.5 h-1.5 bg-red-500 rounded-full"></span>
            Nâng cao
          </span>
        </label>
      </div>
    </div>

    <!-- Sort By -->
    <div>
      <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5">
        <i class="icon-trending-up text-xs mr-1"></i>
        Sắp xếp
      </label>
      <select
        [(ngModel)]="filters.sortBy"
        (change)="onFilterChange()"
        class="w-full px-2.5 py-1.5 border border-gray-300 dark:border-gray-600 rounded-md 
               bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm
               focus:ring-1 focus:ring-blue-500 focus:border-blue-500 
               transition-colors duration-200"
      >
        <option value="title">Tên tài liệu</option>
        <option value="rating">Đánh giá cao nhất</option>
        <option value="students">Lượt đọc nhiều nhất</option>
        <option value="duration">Thời gian đọc</option>
        <option value="created_at">Mới nhất</option>
      </select>
    </div>
  </div>
</div>

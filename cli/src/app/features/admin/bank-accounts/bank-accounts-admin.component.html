<div class="admin-bank-accounts-container">
  <!-- Header -->
  <div class="page-header">
    <div class="header-content">
      <h1>Qu·∫£n l√Ω T√†i kho·∫£n Ng√¢n h√†ng</h1>
      <p class="subtitle">X√°c th·ª±c v√† qu·∫£n l√Ω t√†i kho·∫£n ng√¢n h√†ng c·ªßa creator</p>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <div class="spinner"></div>
    <p>ƒêang t·∫£i danh s√°ch...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-message">
    <i class="icon">‚ö†Ô∏è</i>
    {{ errorMessage }}
  </div>

  <!-- Content -->
  <div *ngIf="!isLoading" class="content">
    <!-- Statistics Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon total">üìä</div>
        <div class="stat-content">
          <div class="stat-value">{{ bankAccounts.length }}</div>
          <div class="stat-label">T·ªïng s·ªë t√†i kho·∫£n</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon verified">‚úÖ</div>
        <div class="stat-content">
          <div class="stat-value">{{ getTotalVerified() }}</div>
          <div class="stat-label">ƒê√£ x√°c th·ª±c</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon pending">‚è≥</div>
        <div class="stat-content">
          <div class="stat-value">{{ getTotalPending() }}</div>
          <div class="stat-label">Ch·ªù x√°c th·ª±c</div>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon active">üè¶</div>
        <div class="stat-content">
          <div class="stat-value">{{ getTotalActive() }}</div>
          <div class="stat-label">ƒêang ho·∫°t ƒë·ªông</div>
        </div>
      </div>
    </div>

    <!-- Filters and Search -->
    <div class="filters-section">
      <div class="filter-group">
        <label for="filterStatus">Tr·∫°ng th√°i:</label>
        <select 
          id="filterStatus" 
          [(ngModel)]="filterStatus" 
          (change)="onFilterChange()"
          class="filter-select">
          <option value="all">T·∫•t c·∫£</option>
          <option value="pending">Ch·ªù x√°c th·ª±c</option>
          <option value="verified">ƒê√£ x√°c th·ª±c</option>
        </select>
      </div>

      <div class="search-group">
        <input 
          type="text" 
          [(ngModel)]="searchQuery" 
          (input)="onSearchChange()"
          placeholder="T√¨m ki·∫øm theo t√™n, email, ng√¢n h√†ng..."
          class="search-input">
        <span class="search-icon">üîç</span>
      </div>
    </div>

    <!-- Bank Accounts Table -->
    <div class="table-container">
      <table class="accounts-table" *ngIf="filteredAccounts.length > 0">
        <thead>
          <tr>
            <th>Creator</th>
            <th>Ng√¢n h√†ng</th>
            <th>S·ªë t√†i kho·∫£n</th>
            <th>T√™n ch·ªß TK</th>
            <th>Chi nh√°nh</th>
            <th>Tr·∫°ng th√°i</th>
            <th>Ng√†y t·∫°o</th>
            <th>Thao t√°c</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let account of getPaginatedAccounts()">
            <td>
              <div class="user-info">
                <div class="user-name">{{ account.User?.name }}</div>
                <div class="user-email">{{ account.User?.email }}</div>
              </div>
            </td>
            <td>
              <div class="bank-name">{{ account.bank_name }}</div>
            </td>
            <td>
              <div class="account-number">{{ maskAccountNumber(account.account_number) }}</div>
            </td>
            <td>
              <div class="account-name">{{ account.account_name }}</div>
            </td>
            <td>
              <div class="branch">{{ account.branch || '‚Äî' }}</div>
            </td>
            <td>
              <span class="status-badge" [ngClass]="getStatusBadgeClass(account)">
                {{ getStatusText(account) }}
              </span>
            </td>
            <td>
              <div class="date">{{ formatDate(account.created_at) }}</div>
            </td>
            <td>
              <div class="action-buttons">
                <button 
                  *ngIf="!account.is_verified"
                  (click)="verifyAccount(account)"
                  [disabled]="isProcessing"
                  class="btn btn-success btn-sm"
                  title="X√°c th·ª±c">
                  ‚úì Duy·ªát
                </button>
                <button 
                  *ngIf="account.is_verified"
                  (click)="unverifyAccount(account)"
                  [disabled]="isProcessing"
                  class="btn btn-warning btn-sm"
                  title="H·ªßy x√°c th·ª±c">
                  ‚úó H·ªßy
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Empty State -->
      <div *ngIf="filteredAccounts.length === 0" class="empty-state">
        <div class="empty-icon">üè¶</div>
        <h3>Kh√¥ng c√≥ t√†i kho·∫£n n√†o</h3>
        <p>Ch∆∞a c√≥ t√†i kho·∫£n ng√¢n h√†ng n√†o ph√π h·ª£p v·ªõi b·ªô l·ªçc c·ªßa b·∫°n.</p>
      </div>
    </div>

    <!-- Pagination -->
    <div class="pagination" *ngIf="filteredAccounts.length > itemsPerPage">
      <button 
        (click)="previousPage()" 
        [disabled]="currentPage === 1"
        class="pagination-btn">
        ‚Üê Tr∆∞·ªõc
      </button>
      
      <div class="pagination-pages">
        <button 
          *ngFor="let page of getPageNumbers()"
          (click)="goToPage(page)"
          [class.active]="page === currentPage"
          class="pagination-page">
          {{ page }}
        </button>
      </div>
      
      <button 
        (click)="nextPage()" 
        [disabled]="currentPage === totalPages"
        class="pagination-btn">
        Sau ‚Üí
      </button>
    </div>

    <!-- Info -->
    <div class="info-text">
      Hi·ªÉn th·ªã {{ getDisplayRange() }} 
      trong t·ªïng s·ªë {{ filteredAccounts.length }} t√†i kho·∫£n
    </div>
  </div>
</div>
